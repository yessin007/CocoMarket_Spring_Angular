{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/HP/Desktop/4SE3/PidevSym/PiDev_Spring_Angular/Front-End/frontOffice/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i3 from \"../../../../shared/services/product.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../../pipes/discount.pipe\";\nconst _c0 = [\"quickView\"];\nfunction QuickViewComponent_ng_template_0_del_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"del\")(1, \"span\", 30);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(3, 1, ctx_r3.product.price * (ctx_r3.currency == null ? null : ctx_r3.currency.price), ctx_r3.currency == null ? null : ctx_r3.currency.currency, \"symbol\"));\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    \"background-color\": a0\n  };\n};\nfunction QuickViewComponent_ng_template_0_ul_19_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 33);\n    i0.ɵɵlistener(\"click\", function QuickViewComponent_ng_template_0_ul_19_li_1_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const color_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r10.ChangeVariants(color_r9, ctx_r10.product));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const color_r9 = ctx.$implicit;\n    i0.ɵɵclassMap(color_r9);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c1, color_r9));\n  }\n}\nfunction QuickViewComponent_ng_template_0_ul_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 31);\n    i0.ɵɵtemplate(1, QuickViewComponent_ng_template_0_ul_19_li_1_Template, 1, 5, \"li\", 32);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.Color(ctx_r4.product.variants));\n  }\n}\nfunction QuickViewComponent_ng_template_0_div_26_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 36);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"titlecase\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const size_r13 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, size_r13));\n  }\n}\nfunction QuickViewComponent_ng_template_0_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"ul\");\n    i0.ɵɵtemplate(2, QuickViewComponent_ng_template_0_div_26_li_2_Template, 4, 3, \"li\", 35);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.Size(ctx_r5.product.variants));\n  }\n}\nfunction QuickViewComponent_ng_template_0_h5_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\", 37)(1, \"span\");\n    i0.ɵɵtext(2, \"In Stock\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction QuickViewComponent_ng_template_0_h5_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\", 37)(1, \"span\");\n    i0.ɵɵtext(2, \"Out of Stock\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c2 = function (a1) {\n  return [\"/shop/product/left/sidebar/\", a1];\n};\nfunction QuickViewComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function QuickViewComponent_ng_template_0_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const modal_r2 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(modal_r2.dismiss(\"Cross click\"));\n    });\n    i0.ɵɵelementStart(3, \"span\", 5);\n    i0.ɵɵtext(4, \"\\u00D7\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 6)(6, \"div\", 7)(7, \"div\", 8);\n    i0.ɵɵelement(8, \"img\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 10)(10, \"div\", 11)(11, \"h2\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"h3\");\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"currency\");\n    i0.ɵɵpipe(17, \"discount\");\n    i0.ɵɵtemplate(18, QuickViewComponent_ng_template_0_del_18_Template, 4, 5, \"del\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, QuickViewComponent_ng_template_0_ul_19_Template, 2, 1, \"ul\", 13);\n    i0.ɵɵelementStart(20, \"div\", 14)(21, \"h6\", 15);\n    i0.ɵɵtext(22, \"product details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"p\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\", 16);\n    i0.ɵɵtemplate(26, QuickViewComponent_ng_template_0_div_26_Template, 3, 1, \"div\", 17);\n    i0.ɵɵtemplate(27, QuickViewComponent_ng_template_0_h5_27_Template, 3, 0, \"h5\", 18);\n    i0.ɵɵtemplate(28, QuickViewComponent_ng_template_0_h5_28_Template, 3, 0, \"h5\", 18);\n    i0.ɵɵelementStart(29, \"h6\", 15);\n    i0.ɵɵtext(30, \"quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 19)(32, \"div\", 20)(33, \"span\", 21)(34, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function QuickViewComponent_ng_template_0_Template_button_click_34_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.decrement());\n    });\n    i0.ɵɵelement(35, \"i\", 23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(36, \"input\", 24);\n    i0.ɵɵelementStart(37, \"span\", 21)(38, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function QuickViewComponent_ng_template_0_Template_button_click_38_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.increment());\n    });\n    i0.ɵɵelement(39, \"i\", 26);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(40, \"div\", 27)(41, \"a\", 28);\n    i0.ɵɵlistener(\"click\", function QuickViewComponent_ng_template_0_Template_a_click_41_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.addToCart(ctx_r18.product));\n    });\n    i0.ɵɵtext(42, \"add to cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"a\", 29);\n    i0.ɵɵtext(44, \"view detail\");\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"src\", ctx_r1.ImageSrc ? ctx_r1.ImageSrc : ctx_r1.product.images[0].src, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r1.product.images[0].alt);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 14, ctx_r1.product.title));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind3(16, 16, i0.ɵɵpipeBind2(17, 20, ctx_r1.product.price * (ctx_r1.currency == null ? null : ctx_r1.currency.price), ctx_r1.product), ctx_r1.currency == null ? null : ctx_r1.currency.currency, \"symbol\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.product == null ? null : ctx_r1.product.discount);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.Color(ctx_r1.product.variants).length);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.product.description.substring(0, 200) + \"...\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.Size(ctx_r1.product.variants).length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.counter <= ctx_r1.product.stock);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.counter > ctx_r1.product.stock);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"value\", ctx_r1.counter);\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassProp(\"disabled\", ctx_r1.counter > ctx_r1.product.stock);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(23, _c2, ctx_r1.product.title.replace(\" \", \"-\")));\n  }\n}\nexport class QuickViewComponent {\n  constructor(platformId, router, modalService, productService) {\n    this.platformId = platformId;\n    this.router = router;\n    this.modalService = modalService;\n    this.productService = productService;\n    this.counter = 1;\n    this.modalOpen = false;\n  }\n  ngOnInit() {}\n  openModal() {\n    this.modalOpen = true;\n    if (isPlatformBrowser(this.platformId)) {\n      // For SSR \n      this.modalService.open(this.QuickView, {\n        size: 'lg',\n        ariaLabelledBy: 'modal-basic-title',\n        centered: true,\n        windowClass: 'Quickview'\n      }).result.then(result => {\n        `Result ${result}`;\n      }, reason => {\n        this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\n      });\n    }\n  }\n  getDismissReason(reason) {\n    if (reason === ModalDismissReasons.ESC) {\n      return 'by pressing ESC';\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n      return 'by clicking on a backdrop';\n    } else {\n      return `with: ${reason}`;\n    }\n  }\n  // Get Product Color\n  Color(variants) {\n    const uniqColor = [];\n    for (let i = 0; i < Object.keys(variants).length; i++) {\n      if (uniqColor.indexOf(variants[i].color) === -1 && variants[i].color) {\n        uniqColor.push(variants[i].color);\n      }\n    }\n    return uniqColor;\n  }\n  // Get Product Size\n  Size(variants) {\n    const uniqSize = [];\n    for (let i = 0; i < Object.keys(variants).length; i++) {\n      if (uniqSize.indexOf(variants[i].size) === -1 && variants[i].size) {\n        uniqSize.push(variants[i].size);\n      }\n    }\n    return uniqSize;\n  }\n  // Change Variants\n  ChangeVariants(color, product) {\n    product.variants.map(item => {\n      if (item.color === color) {\n        product.images.map(img => {\n          if (img.image_id === item.image_id) {\n            this.ImageSrc = img.src;\n          }\n        });\n      }\n    });\n  }\n  // Increament\n  increment() {\n    this.counter++;\n  }\n  // Decrement\n  decrement() {\n    if (this.counter > 1) this.counter--;\n  }\n  // Add to cart\n  addToCart(product) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      product.quantity = _this.counter || 1;\n      const status = yield _this.productService.addToCart(product);\n      if (status) _this.router.navigate(['/shop/cart']);\n    })();\n  }\n  ngOnDestroy() {\n    if (this.modalOpen) {\n      this.modalService.dismissAll();\n    }\n  }\n}\nQuickViewComponent.ɵfac = function QuickViewComponent_Factory(t) {\n  return new (t || QuickViewComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.NgbModal), i0.ɵɵdirectiveInject(i3.ProductService));\n};\nQuickViewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: QuickViewComponent,\n  selectors: [[\"app-quick-view\"]],\n  viewQuery: function QuickViewComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.QuickView = _t.first);\n    }\n  },\n  inputs: {\n    product: \"product\",\n    currency: \"currency\"\n  },\n  decls: 2,\n  vars: 0,\n  consts: [[\"class\", \"theme-modal\"], [\"quickView\", \"\"], [1, \"modal-content\", \"quick-view-modal\"], [1, \"modal-body\"], [\"type\", \"button\", 1, \"close\", \"float-end\", \"border-0\", 3, \"click\"], [\"aria-hidden\", \"true\"], [1, \"row\"], [1, \"col-lg-6\", \"col-xs-12\"], [1, \"quick-view-img\"], [1, \"img-fluid\", 3, \"src\", \"alt\"], [1, \"col-lg-6\", \"rtl-text\"], [1, \"product-right\"], [4, \"ngIf\"], [\"class\", \"color-variant\", 4, \"ngIf\"], [1, \"border-product\"], [1, \"product-title\"], [1, \"product-description\", \"border-product\"], [\"class\", \"size-box\", 4, \"ngIf\"], [\"class\", \"avalibility\", 4, \"ngIf\"], [1, \"qty-box\"], [1, \"input-group\"], [1, \"input-group-prepend\"], [\"type\", \"button\", \"data-type\", \"minus\", 1, \"btn\", \"quantity-left-minus\", 3, \"click\"], [1, \"ti-angle-left\"], [\"type\", \"text\", \"name\", \"quantity\", \"disabled\", \"\", 1, \"form-control\", \"input-number\", 3, \"value\"], [\"type\", \"button\", \"data-type\", \"plus\", 1, \"btn\", \"quantity-right-plus\", 3, \"click\"], [1, \"ti-angle-right\"], [1, \"product-buttons\"], [\"href\", \"javascript:void(0)\", 1, \"btn\", \"btn-solid\", 3, \"click\"], [1, \"btn\", \"btn-solid\", 3, \"routerLink\"], [1, \"money\"], [1, \"color-variant\"], [3, \"class\", \"ngStyle\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngStyle\", \"click\"], [1, \"size-box\"], [4, \"ngFor\", \"ngForOf\"], [\"href\", \"javascript:void(0)\"], [1, \"avalibility\"]],\n  template: function QuickViewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, QuickViewComponent_ng_template_0_Template, 45, 25, \"ng-template\", 0, 1, i0.ɵɵtemplateRefExtractor);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i4.NgStyle, i1.RouterLink, i4.TitleCasePipe, i4.CurrencyPipe, i5.DiscountPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["PLATFORM_ID","isPlatformBrowser","ModalDismissReasons","i0","QuickViewComponent","constructor","platformId","router","modalService","productService","ngOnInit","openModal","modalOpen","open","QuickView","size","ariaLabelledBy","centered","windowClass","result","then","reason","closeResult","getDismissReason","ESC","BACKDROP_CLICK","Color","variants","uniqColor","i","Object","keys","length","indexOf","color","push","Size","uniqSize","ChangeVariants","product","map","item","images","img","image_id","ImageSrc","src","increment","counter","decrement","addToCart","quantity","status","navigate","ngOnDestroy","dismissAll","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\HP\\Desktop\\4SE3\\PidevSym\\PiDev_Spring_Angular\\Front-End\\frontOffice\\src\\app\\shared\\components\\modal\\quick-view\\quick-view.component.ts","C:\\Users\\HP\\Desktop\\4SE3\\PidevSym\\PiDev_Spring_Angular\\Front-End\\frontOffice\\src\\app\\shared\\components\\modal\\quick-view\\quick-view.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy, ViewChild, TemplateRef, Input,\r\n  Injectable, PLATFORM_ID, Inject } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { NgbModal, ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\r\nimport { Router } from '@angular/router';\r\nimport { Product } from \"../../../classes/product\";\r\nimport { ProductService } from '../../../../shared/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-quick-view',\r\n  templateUrl: './quick-view.component.html',\r\n  styleUrls: ['./quick-view.component.scss']\r\n})\r\nexport class QuickViewComponent implements OnInit, OnDestroy  {\r\n\r\n  @Input() product: Product;\r\n  @Input() currency: any;  \r\n  @ViewChild(\"quickView\", { static: false }) QuickView: TemplateRef<any>;\r\n\r\n  public closeResult: string;\r\n  public ImageSrc: string;\r\n  public counter: number = 1;\r\n  public modalOpen: boolean = false;\r\n\r\n  constructor(@Inject(PLATFORM_ID) private platformId: Object,\r\n    private router: Router, private modalService: NgbModal,\r\n    public productService: ProductService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  openModal() {\r\n    this.modalOpen = true;\r\n    if (isPlatformBrowser(this.platformId)) { // For SSR \r\n      this.modalService.open(this.QuickView, { \r\n        size: 'lg',\r\n        ariaLabelledBy: 'modal-basic-title',\r\n        centered: true,\r\n        windowClass: 'Quickview' \r\n      }).result.then((result) => {\r\n        `Result ${result}`\r\n      }, (reason) => {\r\n        this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\r\n      });\r\n    }\r\n  }\r\n\r\n  private getDismissReason(reason: any): string {\r\n    if (reason === ModalDismissReasons.ESC) {\r\n      return 'by pressing ESC';\r\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\r\n      return 'by clicking on a backdrop';\r\n    } else {\r\n      return `with: ${reason}`;\r\n    }\r\n  }\r\n\r\n  // Get Product Color\r\n  Color(variants) {\r\n    const uniqColor = []\r\n    for (let i = 0; i < Object.keys(variants).length; i++) {\r\n      if (uniqColor.indexOf(variants[i].color) === -1 && variants[i].color) {\r\n        uniqColor.push(variants[i].color)\r\n      }\r\n    }\r\n    return uniqColor\r\n  }\r\n\r\n  // Get Product Size\r\n  Size(variants) {\r\n    const uniqSize = []\r\n    for (let i = 0; i < Object.keys(variants).length; i++) {\r\n      if (uniqSize.indexOf(variants[i].size) === -1 && variants[i].size) {\r\n        uniqSize.push(variants[i].size)\r\n      }\r\n    }\r\n    return uniqSize\r\n  }\r\n\r\n  // Change Variants\r\n  ChangeVariants(color, product) {\r\n    product.variants.map((item) => {\r\n      if (item.color === color) {\r\n        product.images.map((img) => {\r\n          if (img.image_id === item.image_id) {\r\n            this.ImageSrc = img.src\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  // Increament\r\n  increment() {\r\n    this.counter++ ;\r\n  }\r\n\r\n  // Decrement\r\n  decrement() {\r\n    if (this.counter > 1) this.counter-- ;\r\n  }\r\n\r\n  // Add to cart\r\n  async addToCart(product: any) {\r\n    product.quantity = this.counter || 1;\r\n    const status = await this.productService.addToCart(product);\r\n    if(status)\r\n      this.router.navigate(['/shop/cart']);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if(this.modalOpen){\r\n      this.modalService.dismissAll();\r\n    }\r\n  }\r\n\r\n}\r\n","<ng-template class=\"theme-modal\" #quickView let-modal>\r\n    <div class=\"modal-content quick-view-modal\">\r\n        <div class=\"modal-body\">\r\n            <button type=\"button\" class=\"close float-end border-0\" (click)=\"modal.dismiss('Cross click')\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n            <div class=\"row\">\r\n                <div class=\"col-lg-6  col-xs-12\">\r\n                    <div class=\"quick-view-img\">\r\n                        <img [src]=\"ImageSrc ? ImageSrc : product.images[0].src\" [alt]=\"product.images[0].alt\" class=\"img-fluid\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-lg-6 rtl-text\">\r\n                    <div class=\"product-right\">\r\n                        <h2>{{ product.title | titlecase }}</h2>\r\n                        <h3>{{ product.price * currency?.price | discount:product | currency:currency?.currency:'symbol' }}\r\n                            <del *ngIf=\"product?.discount\"><span class=\"money\">{{ product.price * currency?.price | currency:currency?.currency:'symbol' }}</span></del>\r\n                        </h3>\r\n                        <ul class=\"color-variant\" *ngIf=\"Color(product.variants).length\">\r\n                            <li [class]=\"color\" *ngFor=\"let color of Color(product.variants)\"\r\n                                [ngStyle]=\"{'background-color': color}\" (click)=\"ChangeVariants(color, product)\">\r\n                            </li>\r\n                        </ul>\r\n                        <div class=\"border-product\">\r\n                            <h6 class=\"product-title\">product details</h6>\r\n                            <p>{{ product.description.substring(0, 200)+'...' }}</p>\r\n                        </div>\r\n                        <div class=\"product-description border-product\">\r\n                            <div class=\"size-box\" *ngIf=\"Size(product.variants).length\">\r\n                                <ul>\r\n                                    <li *ngFor=\"let size of Size(product.variants)\">\r\n                                        <a href=\"javascript:void(0)\">{{ size | titlecase }}</a>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <h5 class=\"avalibility\" *ngIf=\"counter <= product.stock\"><span>In Stock</span></h5>\r\n                            <h5 class=\"avalibility\" *ngIf=\"counter > product.stock\"><span>Out of Stock</span></h5>\r\n                            <h6 class=\"product-title\">quantity</h6>\r\n                            <div class=\"qty-box\">\r\n                                <div class=\"input-group\">\r\n                                    <span class=\"input-group-prepend\">\r\n                                        <button type=\"button\" class=\"btn quantity-left-minus\" data-type=\"minus\" (click)=\"decrement()\">\r\n                                            <i class=\"ti-angle-left\"></i>\r\n                                        </button>\r\n                                    </span>\r\n                                    <input type=\"text\" name=\"quantity\" class=\"form-control input-number\"  [value]=\"counter\" disabled>\r\n                                    <span class=\"input-group-prepend\">\r\n                                        <button type=\"button\" class=\"btn quantity-right-plus\" data-type=\"plus\" (click)=\"increment()\">\r\n                                            <i class=\"ti-angle-right\"></i>\r\n                                        </button>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"product-buttons\">\r\n                            <a href=\"javascript:void(0)\" class=\"btn btn-solid\" [class.disabled]=\"counter > product.stock\" (click)=\"addToCart(product)\">add to cart</a>\r\n                            <a [routerLink]=\"['/shop/product/left/sidebar/', product.title.replace(' ', '-')]\" class=\"btn btn-solid\">view detail</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}