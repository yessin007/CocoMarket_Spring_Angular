{"ast":null,"code":"import { PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = [\"ageVerification\"];\nfunction AgeVerificationComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5)(4, \"div\", 6)(5, \"div\", 7)(6, \"div\", 8)(7, \"h2\");\n    i0.ɵɵtext(8, \" Age verification\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"h4\");\n    i0.ɵɵtext(10, \"This Website requires you to be 18 years or older to enter. Please enter your Date Of Birth in this fields below in order to continue:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"form\", 9)(12, \"div\");\n    i0.ɵɵelement(13, \"input\", 10)(14, \"input\", 11)(15, \"input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function AgeVerificationComponent_ng_template_0_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.ageForm());\n    });\n    i0.ɵɵtext(17, \" submit \");\n    i0.ɵɵelementEnd()()()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"formControl\", ctx_r1.ageVerificationForm.controls[\"day\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formControl\", ctx_r1.ageVerificationForm.controls[\"month\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formControl\", ctx_r1.ageVerificationForm.controls[\"year\"]);\n  }\n}\nexport class AgeVerificationComponent {\n  constructor(platformId, modalService, fb) {\n    this.platformId = platformId;\n    this.modalService = modalService;\n    this.fb = fb;\n    this.ageVerificationForm = this.fb.group({\n      day: ['', Validators.required],\n      month: ['', Validators.required],\n      year: ['', Validators.required]\n    });\n  }\n  ngOnInit() {}\n  ngAfterViewInit() {\n    if (localStorage.getItem(\"ageVerification\") !== 'true') this.openModal();\n  }\n  openModal() {\n    if (isPlatformBrowser(this.platformId)) {\n      // For SSR \n      this.modalService.open(this.AgeVerificationModal, {\n        size: 'md',\n        backdrop: 'static',\n        keyboard: false,\n        centered: true,\n        windowClass: 'bd-example-modal-md theme-modal agem'\n      }).result.then(result => {\n        `Result ${result}`;\n      }, reason => {\n        this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\n      });\n    }\n  }\n  ageForm() {\n    var day = this.ageVerificationForm.value.day;\n    var month = this.ageVerificationForm.value.month;\n    var year = this.ageVerificationForm.value.year;\n    var age = 18;\n    var mydate = new Date();\n    mydate.setFullYear(year, month - 1, day);\n    var currdate = new Date();\n    this.currdate = currdate;\n    var setDate = new Date();\n    this.setDate = setDate.setFullYear(mydate.getFullYear() + age, month - 1, day);\n    if (this.currdate - this.setDate > 0) {\n      localStorage.setItem('ageVerification', 'true');\n      this.modalService.dismissAll();\n    } else {\n      window.location.href = \"https://www.google.com/\";\n    }\n  }\n  getDismissReason(reason) {\n    if (reason === ModalDismissReasons.ESC) {\n      return 'by pressing ESC';\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n      return 'by clicking on a backdrop';\n    } else {\n      return `with: ${reason}`;\n    }\n  }\n  ngOnDestroy() {}\n}\nAgeVerificationComponent.ɵfac = function AgeVerificationComponent_Factory(t) {\n  return new (t || AgeVerificationComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.UntypedFormBuilder));\n};\nAgeVerificationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AgeVerificationComponent,\n  selectors: [[\"app-age-verification\"]],\n  viewQuery: function AgeVerificationComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.AgeVerificationModal = _t.first);\n    }\n  },\n  decls: 2,\n  vars: 0,\n  consts: [[\"class\", \"theme-modal\"], [\"ageVerification\", \"\"], [1, \"modal-content\"], [1, \"modal-body\", \"modal13\"], [1, \"container-fluid\", \"p-0\"], [1, \"row\"], [1, \"col-12\"], [1, \"modal-bg\"], [1, \"age-content\"], [\"id\", \"demoForm\"], [\"type\", \"number\", \"name\", \"day\", \"id\", \"birthDay\", \"value\", \"\", \"placeholder\", \"DD\", \"min\", \"1\", \"max\", \"2\", 1, \"form-control\", 3, \"formControl\"], [\"type\", \"number\", \"name\", \"month\", \"id\", \"birthMonth\", \"value\", \"\", \"placeholder\", \"MM\", \"min\", \"1\", \"max\", \"2\", 1, \"form-control\", 3, \"formControl\"], [\"type\", \"number\", \"name\", \"year\", \"id\", \"birthYear\", \"value\", \"\", \"placeholder\", \"YY\", \"min\", \"1\", \"max\", \"4\", 1, \"form-control\", 3, \"formControl\"], [\"type\", \"submit\", 1, \"btn\", \"btn-solid\", 3, \"click\"]],\n  template: function AgeVerificationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AgeVerificationComponent_ng_template_0_Template, 18, 3, \"ng-template\", 0, 1, i0.ɵɵtemplateRefExtractor);\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.MinValidator, i2.MaxValidator, i2.NgForm, i2.FormControlDirective],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["PLATFORM_ID","isPlatformBrowser","ModalDismissReasons","Validators","i0","AgeVerificationComponent","constructor","platformId","modalService","fb","ageVerificationForm","group","day","required","month","year","ngOnInit","ngAfterViewInit","localStorage","getItem","openModal","open","AgeVerificationModal","size","backdrop","keyboard","centered","windowClass","result","then","reason","closeResult","getDismissReason","ageForm","value","age","mydate","Date","setFullYear","currdate","setDate","getFullYear","setItem","dismissAll","window","location","href","ESC","BACKDROP_CLICK","ngOnDestroy","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\HP\\Desktop\\4SE3\\PidevSym\\PiDev_Spring_Angular\\Front-End\\frontOffice\\src\\app\\shared\\components\\modal\\age-verification\\age-verification.component.ts","C:\\Users\\HP\\Desktop\\4SE3\\PidevSym\\PiDev_Spring_Angular\\Front-End\\frontOffice\\src\\app\\shared\\components\\modal\\age-verification\\age-verification.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy, ViewChild, TemplateRef, Input, AfterViewInit,\r\n    Injectable, PLATFORM_ID, Inject } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { NgbModal, ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\r\nimport { UntypedFormGroup, UntypedFormBuilder, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-age-verification',\r\n  templateUrl: './age-verification.component.html',\r\n  styleUrls: ['./age-verification.component.scss']\r\n})\r\nexport class AgeVerificationComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  @ViewChild(\"ageVerification\") AgeVerificationModal: TemplateRef<any>;\r\n\r\n  public closeResult: string;\r\n  public ageVerificationForm:  UntypedFormGroup;\r\n  public currdate: any;\r\n  public setDate: any;\r\n\r\n  constructor(@Inject(PLATFORM_ID) private platformId: Object,\r\n    private modalService: NgbModal,\r\n  \tprivate fb: UntypedFormBuilder) { \r\n  \tthis.ageVerificationForm = this.fb.group({\r\n      day: ['', Validators.required],\r\n      month: ['', Validators.required],\r\n      year: ['', Validators.required],\r\n    })\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n  \tif(localStorage.getItem(\"ageVerification\") !== 'true')\r\n       this.openModal();\r\n  }\r\n\r\n  openModal() {\r\n    if (isPlatformBrowser(this.platformId)) { // For SSR \r\n      this.modalService.open(this.AgeVerificationModal, { \r\n        size: 'md',\r\n        backdrop: 'static',\r\n        keyboard: false,\r\n        centered: true,\r\n        windowClass: 'bd-example-modal-md theme-modal agem'\r\n      }).result.then((result) => {\r\n        `Result ${result}`\r\n      }, (reason) => {\r\n        this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\r\n      });\r\n    }\r\n  }\r\n\r\n  ageForm() {\r\n    var day = this.ageVerificationForm.value.day;\r\n    var month = this.ageVerificationForm.value.month;\r\n    var year = this.ageVerificationForm.value.year;\r\n    var age = 18;\r\n    var mydate = new Date();\r\n    mydate.setFullYear(year, month-1, day);\r\n\r\n    var currdate = new Date();\r\n    this.currdate = currdate;\r\n    var setDate = new Date();         \r\n    this.setDate = setDate.setFullYear(mydate.getFullYear() + age, month-1, day);\r\n\r\n    if ((this.currdate - this.setDate) > 0){\r\n      localStorage.setItem('ageVerification','true')\r\n      this.modalService.dismissAll();\r\n    } else {\r\n      window.location.href = \"https://www.google.com/\";\r\n    }\r\n  }\r\n\r\n  private getDismissReason(reason: any): string {\r\n    if (reason === ModalDismissReasons.ESC) {\r\n      return 'by pressing ESC';\r\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\r\n      return 'by clicking on a backdrop';\r\n    } else {\r\n      return `with: ${reason}`;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    \r\n  }\r\n\r\n}\r\n","<!--modal popup start-->\r\n<ng-template class=\"theme-modal\" #ageVerification let-modal>\r\n\t<div class=\"modal-content\">\r\n        <div class=\"modal-body modal13\">\r\n            <div class=\"container-fluid p-0\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <div class=\"modal-bg\">\r\n                            <div class=\"age-content\">\r\n                                <h2> Age verification</h2>\r\n                                <h4>This Website requires you to be 18 years or older to enter. Please enter your Date Of Birth in this fields below in order to continue:</h4>\r\n                                <form id=\"demoForm\">\r\n                                    <div>\r\n                                        <input type=\"number\" name=\"day\" id=\"birthDay\" \r\n                                        [formControl]=\"ageVerificationForm.controls['day']\" value=\"\" class=\"form-control\" placeholder=\"DD\" min=\"1\" max=\"2\">\r\n                                        <input type=\"number\" name=\"month\" id=\"birthMonth\" value=\"\" \r\n                                        [formControl]=\"ageVerificationForm.controls['month']\" class=\"form-control\" placeholder=\"MM\" min=\"1\" max=\"2\">\r\n                                        <input type=\"number\" name=\"year\" id=\"birthYear\" value=\"\" \r\n                                        [formControl]=\"ageVerificationForm.controls['year']\" class=\"form-control\" placeholder=\"YY\" min=\"1\" max=\"4\">\r\n                                    </div>\r\n                                    <button type=\"submit\" (click)=\"ageForm()\" class=\"btn btn-solid\">\r\n                                    \tsubmit\r\n                                    </button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<!--modal popup end-->"]},"metadata":{},"sourceType":"module","externalDependencies":[]}